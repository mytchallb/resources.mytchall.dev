---
import Layout from "../layouts/Layout.astro"
import { getResourceData } from "../lib/resourceUtils"
import ResourceList from "../components/ResourceList.vue"
import Nav from "../components/Nav.vue"
import Sidebar from "../components/Sidebar.vue"

const { resources, categoriesWithCount, uniqueTags } = await getResourceData()
---

<Layout>
  <div class="flex h-screen w-full overflow-hidden">
    <Sidebar categories={categoriesWithCount} client:load />
    <div class="flex-1 flex flex-col min-w-0">
      <Nav client:load tags={uniqueTags} />
      <ResourceList categories={categoriesWithCount} resources={resources} tags={uniqueTags} client:load />
    </div>
  </div>
</Layout>
