import{v as g,w as y}from"./runtime-dom.esm-bundler.Druf4bRG.js";import{_ as w}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as l,a as o,b,w as p,t as d,r as s,o as c}from"./runtime-core.esm-bundler.BHkGTCOb.js";const _={__name:"AddScreen",setup(v,{expose:t}){t();const n=s(""),e=s(""),a=s(""),i=s(""),r=s(!1),u={title:n,content:e,successMessage:a,errorMessage:i,isSubmitting:r,submitForm:async()=>{r.value=!0,i.value="",a.value="";const m=n.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")+".md",x=`---
title: ${n.value}
---

${e.value}`;try{if(!(await fetch("/add/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:m,content:x})})).ok)throw new Error("Failed to create file");a.value=`Successfully created ${m}`,n.value="",e.value=""}catch(f){i.value="Failed to create file. Please try again.",console.error("Error:",f)}finally{r.value=!1}},ref:s};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},S={class:"max-w-2xl mx-auto p-4"},k=["disabled"],h={key:0,class:"mt-4 p-4 bg-green-100 text-green-700 rounded-md"},C={key:1,class:"mt-4 p-4 bg-red-100 text-red-700 rounded-md"};function M(v,t,n,e,a,i){return c(),l("div",S,[t[4]||(t[4]=o("h1",{class:"text-2xl font-bold mb-6"},"Create New Resource",-1)),o("form",{onSubmit:y(e.submitForm,["prevent"]),class:"space-y-4"},[o("div",null,[t[2]||(t[2]=o("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1)),p(o("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=r=>e.title=r),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter resource title"},null,512),[[g,e.title]])]),o("div",null,[t[3]||(t[3]=o("label",{for:"content",class:"block text-sm font-medium text-gray-700"},"Content",-1)),p(o("textarea",{id:"content","onUpdate:modelValue":t[1]||(t[1]=r=>e.content=r),required:"",rows:"10",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter markdown content"},null,512),[[g,e.content]])]),o("button",{type:"submit",disabled:e.isSubmitting,class:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50"},d(e.isSubmitting?"Creating...":"Create Resource"),9,k)],32),e.successMessage?(c(),l("div",h,d(e.successMessage),1)):b("",!0),e.errorMessage?(c(),l("div",C,d(e.errorMessage),1)):b("",!0)])}const V=w(_,[["render",M]]);export{V as default};
