import{s as U,l as P,m as I}from"./runtime-core.esm-bundler.ZlGA0rg4.js";function F(e){let s=U(),t=e.subscribe(n=>{s.value=n});return P()&&I(t),s}let i=[],a=0;const f=4;let u=e=>{let s=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=s.push(n),()=>{for(let r=a+f;r<i.length;)i[r]===n?i.splice(r,f):r+=f;let o=s.indexOf(n);~o&&(s.splice(o,1),--t.lc||t.off())}},notify(n,o){let r=!i.length;for(let l of s)i.push(l,t.value,n,o);if(r){for(a=0;a<i.length;a+=f)i[a](i[a+1],i[a+2],i[a+3]);i.length=0}},off(){},set(n){let o=t.value;o!==n&&(t.value=n,t.notify(o))},subscribe(n){let o=t.listen(n);return n(t.value),o},value:e};return t};const N=5,g=6,h=10;let R=(e,s,t,n)=>(e.events=e.events||{},e.events[t+h]||(e.events[t+h]=n(o=>{e.events[t].reduceRight((r,l)=>(l(r),r),{shared:{},...o})})),e.events[t]=e.events[t]||[],e.events[t].push(s),()=>{let o=e.events[t],r=o.indexOf(s);o.splice(r,1),o.length||(delete e.events[t],e.events[t+h](),delete e.events[t+h])}),O=1e3,A=(e,s)=>R(e,n=>{let o=s(n);o&&e.events[g].push(o)},N,n=>{let o=e.listen;e.listen=(...l)=>(!e.lc&&!e.active&&(e.active=!0,n()),o(...l));let r=e.off;return e.events[g]=[],e.off=()=>{r(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let l of e.events[g])l();e.events[g]=[]}},O)},()=>{e.listen=o,e.off=r}}),w=e=>e,d={},v={addEventListener(){},removeEventListener(){}};function Q(){try{return typeof localStorage<"u"}catch{return!1}}Q()&&(d=localStorage);let b={addEventListener(e,s,t){window.addEventListener("storage",s),window.addEventListener("pageshow",t)},removeEventListener(e,s,t){window.removeEventListener("storage",s),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(v=b);function B(e,s=void 0,t={}){let n=t.encode||w,o=t.decode||w,r=u(s),l=r.set;r.set=c=>{typeof c>"u"?delete d[e]:d[e]=n(c),l(c)};function p(c){c.key===e?c.newValue===null?l(void 0):l(o(c.newValue)):d[e]||l(void 0)}function y(){r.set(d[e]?o(d[e]):s)}return A(r,()=>{if(y(),t.listen!==!1)return v.addEventListener(e,p,y),()=>{v.removeEventListener(e,p,y)}}),r}const C=typeof window<"u"&&Number(localStorage.getItem("selectedTheme"))||0,T=B("selectedTheme",C),W=u(!1),M=u([]),_=u([]),k=u(""),D=u("category-asc"),Y=()=>{E([]),L([]),S(""),x("category-asc")},E=e=>{M.set(e),m("categories",e)},L=e=>{_.set(e),m("tags",e)},S=e=>{console.log("updating searchQuery with ",e),k.set(e),m("search",e)},x=e=>{D.set(e),m("sortBy",e)},V=e=>{const s=document.querySelector("body");s.classList.remove(...Array.from(s.classList).filter(t=>t.startsWith("theme-"))),s.classList.add(`theme-${e}`)},z=()=>{const e=Number(T.get());console.log("currentTheme",e);const s=document.documentElement,t=parseInt(getComputedStyle(s).getPropertyValue("--max-themes").trim());console.log("maxThemes",t);const n=(e+1)%t;console.log("nextIndex",n);const o=document.querySelector("body");console.log("Current body classes:",o.classList),T.set(n),V(n),console.log("New body classes:",o.classList)},m=(e,s=[])=>{const t=new URL(window.location.href),n=Array.isArray(s)?s.join(","):s;n.length===0||n==="category-asc"?t.searchParams.delete(e):t.searchParams.set(e,n),window.history.replaceState({},"",decodeURIComponent(t.toString()))},G=()=>{console.log("applyUrlParamsToStore");const e=new URL(window.location.href),s=e.searchParams.get("sortBy");console.log("sortBy",s),s&&x(s);const t=e.searchParams.get("categories"),n=t?t.split(","):[];console.log("categories",n),n&&E(n);const o=e.searchParams.get("tags"),r=o?o.split(","):[];console.log("tags",r),r&&L(r);const l=e.searchParams.get("search");console.log("searchQuery",l),l&&S(l)};export{E as a,M as b,V as c,z as d,_ as e,L as f,k as g,D as h,W as i,x as j,S as k,G as l,Y as r,T as s,F as u};
